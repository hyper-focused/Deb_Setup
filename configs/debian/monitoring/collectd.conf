# /etc/collectd/collectd.conf — Debian 13 (QEMU VM)
# Deployed by hyper-focused/Deb_Setup init.sh
# Sends metrics to LibreNMS collectd listener (COLLECTD_SERVER:25826)
# Lighter config vs PVE — no irq/sensors/entropy (not meaningful in a VM)

# ── Global ────────────────────────────────────────────────────────────────────
Hostname    "COLLECTD_HOSTNAME"
FQDNLookup  false
Interval    30
Timeout     2
ReadThreads 3

# ── Logging ───────────────────────────────────────────────────────────────────
LoadPlugin syslog
<Plugin syslog>
    LogLevel info
</Plugin>

# ── Core metrics ──────────────────────────────────────────────────────────────
LoadPlugin cpu
<Plugin cpu>
    ReportByCpu      true
    ReportByState    true
    ValuesPercentage true
</Plugin>

LoadPlugin memory
<Plugin memory>
    ValuesAbsolute   true
    ValuesPercentage true
</Plugin>

LoadPlugin load

LoadPlugin disk
<Plugin disk>
    # Filter virtual/loop devices
    Disk "/^loop[0-9]+$/"
    Disk "/^ram[0-9]+$/"
    IgnoreSelected true
</Plugin>

LoadPlugin interface
<Plugin interface>
    Interface "lo"
    IgnoreSelected true
</Plugin>

LoadPlugin processes
LoadPlugin users
LoadPlugin uptime

# ── Network sender → LibreNMS collectd listener ───────────────────────────────
LoadPlugin network
<Plugin network>
    <Server "COLLECTD_SERVER" "25826">
    </Server>
</Plugin>

# ── Drop-in configs ───────────────────────────────────────────────────────────
Include "/etc/collectd/collectd.conf.d/"
