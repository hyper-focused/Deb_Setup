# /etc/snmp/snmpd.conf — Proxmox VE (bare metal)
# Deployed by hyper-focused/Deb_Setup init.sh
# Extend scripts pulled from librenms/librenms-agent at pinned SHA

# ── Access control ────────────────────────────────────────────────────────────
com2sec readonly  default         SNMP_COMMUNITY

group ro-group v2c        readonly
view  all       included  1.3.6.1
access ro-group "" any noauth exact all none none

# ── System identity ───────────────────────────────────────────────────────────
sysLocation  SYSLOCATION
sysContact   SYSCONTACT
SysServices  76
agentaddress 0.0.0.0

# ── OS / distro (required by LibreNMS) ───────────────────────────────────────
extend distro /usr/bin/distro

# ── Hardware identity (bare metal DMI) ───────────────────────────────────────
extend manufacturer '/usr/bin/cat /sys/devices/virtual/dmi/id/sys_vendor'
extend hardware     '/usr/bin/cat /sys/devices/virtual/dmi/id/product_name'
extend serial       '/usr/bin/cat /sys/devices/virtual/dmi/id/board_serial'

# ── Core system ───────────────────────────────────────────────────────────────
extend linux_softnet_stat  /etc/snmp/linux_softnet_stat -b
extend osupdate            /etc/snmp/osupdate
extend entropy             /etc/snmp/entropy

# ── Time sync (chrony — standard on PVE) ─────────────────────────────────────
extend chrony              /etc/snmp/chrony

# ── Storage (PVE always uses ZFS) ────────────────────────────────────────────
extend zfs                 /etc/snmp/zfs -b

# ── Physical drives (SMART — bare metal only) ─────────────────────────────────
extend smart               /etc/snmp/smart

# ── Postfix (PVE installs postfix for cluster/backup notifications) ───────────
extend mailq               /etc/snmp/postfix-queues
extend postfixdetailed     /etc/snmp/postfixdetailed

# ── RRDcached (PVE uses it for all graph data) ───────────────────────────────
extend rrdcached           /etc/snmp/rrdcached
