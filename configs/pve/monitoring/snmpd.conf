# /etc/snmp/snmpd.conf — Proxmox VE (bare metal)
# Deployed by hyper-focused/Deb_Setup init.sh
# !! Edit SNMP_COMMUNITY, SYSLOCATION, SYSCONTACT before deploying !!

# ── Access control ────────────────────────────────────────────────────────────
com2sec readonly  default         SNMP_COMMUNITY

group ro-group v2c        readonly
view  all       included  1.3.6.1
access ro-group "" any noauth exact all none none

# ── System identity ───────────────────────────────────────────────────────────
sysLocation  SYSLOCATION
sysContact   SYSCONTACT
SysServices  76
agentaddress 0.0.0.0

# ── OS / distro detection ─────────────────────────────────────────────────────
extend distro /usr/bin/distro

# ── Hardware info (bare metal DMI) ───────────────────────────────────────────
extend manufacturer '/usr/bin/cat /sys/devices/virtual/dmi/id/sys_vendor'
extend hardware     '/usr/bin/cat /sys/devices/virtual/dmi/id/product_name'
extend serial       '/usr/bin/cat /sys/devices/virtual/dmi/id/board_serial'

# ── LibreNMS SNMP extends ─────────────────────────────────────────────────────
extend linux_softnet_stat  /etc/snmp/linux_softnet_stat -b
extend smart               /etc/snmp/smart
extend zfs                 /etc/snmp/zfs -b
extend chrony              /etc/snmp/chrony
extend mailq               /etc/snmp/postfix-queues
extend postfixdetailed     /etc/snmp/postfixdetailed
extend osupdate            /etc/snmp/osupdate
extend entropy             /etc/snmp/entropy

# ── Optional: enable if services are running ──────────────────────────────────
#extend nginx       /etc/snmp/nginx
#extend php-fpm     /etc/snmp/php-fpm -C /etc/snmp/php-fpm-extend.json
#extend mysql       /etc/snmp/mysql
#extend redis       /etc/snmp/redis.py
