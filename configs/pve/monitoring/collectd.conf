# /etc/collectd/collectd.conf — Proxmox VE (bare metal)
# Deployed by hyper-focused/Deb_Setup init.sh
# Sends metrics to LibreNMS collectd listener (COLLECTD_SERVER:25826)

# ── Global ────────────────────────────────────────────────────────────────────
Hostname    "COLLECTD_HOSTNAME"
FQDNLookup  false
Interval    10
Timeout     2
ReadThreads 5

# ── Logging ───────────────────────────────────────────────────────────────────
LoadPlugin syslog
<Plugin syslog>
    LogLevel info
</Plugin>

# ── Core metrics ──────────────────────────────────────────────────────────────
LoadPlugin cpu
<Plugin cpu>
    ReportByCpu        true
    ReportByState      true
    ValuesPercentage   true
</Plugin>

LoadPlugin memory
<Plugin memory>
    ValuesAbsolute  true
    ValuesPercentage true
</Plugin>

LoadPlugin load

LoadPlugin disk
<Plugin disk>
    # Uncomment to ignore specific devices:
    # Disk "loop0"
    # IgnoreSelected true
</Plugin>

LoadPlugin interface
<Plugin interface>
    Interface "lo"
    IgnoreSelected true
</Plugin>

LoadPlugin processes
LoadPlugin swap
LoadPlugin users
LoadPlugin uptime
LoadPlugin entropy

# ── Bare-metal extras ─────────────────────────────────────────────────────────
LoadPlugin irq
LoadPlugin contextswitch

# lm-sensors (requires sensors-detect to have been run)
# LoadPlugin sensors

# ZFS ARC stats
# LoadPlugin zfs_arc

# ── Network sender → LibreNMS collectd listener ───────────────────────────────
LoadPlugin network
<Plugin network>
    <Server "COLLECTD_SERVER" "25826">
    </Server>
</Plugin>

# ── Drop-in configs ───────────────────────────────────────────────────────────
Include "/etc/collectd/collectd.conf.d/"
