# /etc/sysctl.d/99-pve-tuning.conf — Proxmox VE (bare metal)
# Deployed by hyper-focused/Deb_Setup init.sh

# ── Memory ────────────────────────────────────────────────────────────────────
# Low swappiness: zram handles overflow; prefer keeping RAM resident
vm.swappiness = 10
# Single-page swap cluster works better with zram than block devices (default 3)
vm.page-cluster = 0
# Balanced inode/dentry cache pressure for a hypervisor workload
vm.vfs_cache_pressure = 50

# ── Network (PVE bridges and routes significant VM traffic) ───────────────────
net.ipv4.ip_forward = 1
net.core.somaxconn = 65535
net.core.netdev_max_backlog = 16384
net.core.rmem_max = 16777216
net.core.wmem_max = 16777216
net.ipv4.tcp_rmem = 4096 87380 16777216
net.ipv4.tcp_wmem = 4096 65536 16777216

# ── System ────────────────────────────────────────────────────────────────────
fs.file-max = 2097152
kernel.pid_max = 4194304
